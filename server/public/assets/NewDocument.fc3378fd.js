import{_ as b,o as i,c as r,a as t,t as f,p as g,m as y,k,d as c,l as M,Q as I,b as v,h as $,i as B,s as N,v as u,x as p,y as A,F as m,e as C}from"./index.f74d9e1e.js";const V=l=>(g("data-v-890abcc5"),l=l(),y(),l),E={id:"alert1",class:"alert alert-warning"},L=V(()=>t("i",{class:"fa-solid fa-xmark fa-lg"},null,-1)),T=[L],U={__name:"WarningAlert",props:{alertMessage:String},setup(l){const d=()=>{document.getElementById("alert1").classList.add("hidden")};return(n,s)=>(i(),r("div",E,[t("p",null,f(l.alertMessage),1),t("div",{onClick:d,class:"alert-action"},T)]))}},W=b(U,[["__scopeId","data-v-890abcc5"]]);const h=l=>(g("data-v-1218eafc"),l=l(),y(),l),F={class:"document-form-wrapper"},O={class:"flex f-gap-1 mb-2"},Q=h(()=>t("button",{type:"submit",class:"btn btn-success"},"Publish",-1)),q={class:"flex f-align-center"},z={id:"related_service_div"},H=["value"],P=h(()=>t("div",{id:"editor"},null,-1)),R={__name:"NewDocument",setup(l){const d=k(),n=c({display:!1,message:null}),s=c({title:null,body:null,related_service:null}),_=c([]),x=[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["clean"]],w=()=>{d.push("/documentation")},D=()=>{},S=async()=>{const o=new Date().toISOString();s.value.body=document.getElementsByClassName("ql-editor")[0].innerHTML,await v.post("/create/document/draft",{title:s.value.title,text:s.value.body,timestamp:o,related_service:s.value.related_service}).then(e=>{e.data.status==="success"?d.push("/documentation"):e.data.status==="failed"&&(n.value.display=!0,n.value.message=e.data.message)}).catch(e=>{console.error(e)})};return M(()=>{new I("#editor",{modules:{toolbar:x},placeholder:"Document Body...",theme:"snow"}),v.get("/api/services").then(o=>{_.value=o.data.services}).catch(o=>{})}),(o,e)=>(i(),r(m,null,[n.value.display?(i(),$(W,{key:0,alertMessage:n.value.message},null,8,["alertMessage"])):B("",!0),t("div",F,[t("form",{onSubmit:e[5]||(e[5]=N(a=>D(),["prevent"]))},[t("div",O,[Q,t("button",{type:"button",onClick:e[0]||(e[0]=a=>S()),class:"btn btn-secondary"},"Save Draft"),t("button",{type:"button",onClick:e[1]||(e[1]=a=>w()),class:"btn btn-danger"},"Discard")]),t("div",q,[t("div",null,[u(t("input",{type:"text",name:"title",id:"title",class:"new-document-title",placeholder:"Document Title...","onUpdate:modelValue":e[2]||(e[2]=a=>s.value.title=a)},null,512),[[p,s.value.title]])]),t("div",z,[u(t("select",{name:"related_service",id:"related_service","onUpdate:modelValue":e[3]||(e[3]=a=>s.value.related_service=a)},[(i(!0),r(m,null,C(_.value,a=>(i(),r("option",{value:a.service_id},f(a.title),9,H))),256))],512),[[A,s.value.related_service]])])]),P,u(t("input",{style:{display:"none"},type:"text",name:"comment_post_value",id:"comment_post_value","onUpdate:modelValue":e[4]||(e[4]=a=>s.value.body=a)},null,512),[[p,s.value.body]])],32)])],64))}},G=b(R,[["__scopeId","data-v-1218eafc"]]);export{G as default};
