import{_ as b,o as i,c as r,a as t,t as f,p as g,m as y,k,d as c,l as M,Q as I,b as p,h as $,i as B,v as N,x as u,y as v,z as A,F as m,e as C}from"./index.d1b5e4f8.js";const V=l=>(g("data-v-8e883dd9"),l=l(),y(),l),E={id:"alert1",class:"alert alert-warning"},L=V(()=>t("i",{class:"fa-solid fa-xmark fa-lg"},null,-1)),T=[L],U={__name:"WarningAlert",props:{alertMessage:String},setup(l){const d=()=>{document.getElementById("alert1").classList.add("hidden")};return(o,s)=>(i(),r("div",E,[t("p",null,f(l.alertMessage),1),t("div",{onClick:d,class:"alert-action"},T)]))}},W=b(U,[["__scopeId","data-v-8e883dd9"]]);const h=l=>(g("data-v-76fb9188"),l=l(),y(),l),z={class:"document-form-wrapper"},F={class:"flex f-gap-1 mb-2"},O=h(()=>t("button",{type:"submit",class:"btn btn-success"},"Publish",-1)),Q={class:"flex f-align-center"},q={id:"related_service_div"},H=["value"],P=h(()=>t("div",{id:"editor"},null,-1)),R={__name:"NewDocument",setup(l){const d=k(),o=c({display:!1,message:null}),s=c({title:null,body:null,related_service:null}),_=c([]),x=[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["clean"]],w=()=>{d.push("/documentation")},D=()=>{},S=async()=>{const n=new Date().toISOString();s.value.body=document.getElementsByClassName("ql-editor")[0].innerHTML,await p.post("/create/document/draft",{title:s.value.title,text:s.value.body,timestamp:n,related_service:s.value.related_service}).then(e=>{e.data.status==="success"?d.push("/documentation"):e.data.status==="failed"&&(o.value.display=!0,o.value.message=e.data.message)}).catch(e=>{console.error(e.response.data)})};return M(()=>{new I("#editor",{modules:{toolbar:x},placeholder:"Document Body...",theme:"snow"}),p.get("/api/services").then(n=>{_.value=n.data.services}).catch(n=>{console.error(n.response.data)})}),(n,e)=>(i(),r(m,null,[o.value.display?(i(),$(W,{key:0,alertMessage:o.value.message},null,8,["alertMessage"])):B("",!0),t("div",z,[t("form",{onSubmit:e[5]||(e[5]=N(a=>D(),["prevent"]))},[t("div",F,[O,t("button",{type:"button",onClick:e[0]||(e[0]=a=>S()),class:"btn btn-secondary"},"Save Draft"),t("button",{type:"button",onClick:e[1]||(e[1]=a=>w()),class:"btn btn-danger"},"Discard")]),t("div",Q,[t("div",null,[u(t("input",{type:"text",name:"title",id:"title",class:"new-document-title",placeholder:"Document Title...","onUpdate:modelValue":e[2]||(e[2]=a=>s.value.title=a)},null,512),[[v,s.value.title]])]),t("div",q,[u(t("select",{name:"related_service",id:"related_service","onUpdate:modelValue":e[3]||(e[3]=a=>s.value.related_service=a)},[(i(!0),r(m,null,C(_.value,a=>(i(),r("option",{value:a.service_id},f(a.title),9,H))),256))],512),[[A,s.value.related_service]])])]),P,u(t("input",{style:{display:"none"},type:"text",name:"comment_post_value",id:"comment_post_value","onUpdate:modelValue":e[4]||(e[4]=a=>s.value.body=a)},null,512),[[v,s.value.body]])],32)])],64))}},G=b(R,[["__scopeId","data-v-76fb9188"]]);export{G as default};
